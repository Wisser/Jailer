<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Jailer</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="keywords" content="Data Export Tool">
  <meta name="description"
 content="data export referential integrity java jdbc dbms">
  <link rel="stylesheet" type="text/css"
 href="exporting-data-Dateien/styles.css">
</head>
<body left-margin="0" top-margin="0">
<div align="left">
<table
 style="text-align: left; position: absolute; left: 0pt; top: 0pt;"
 border="0" cellpadding="0" cellspacing="0" height="407" width="100%">
  <tbody>
    <tr>
      <td colspan="2" class="bannerbackground" height="33" width="100%">
      <table border="0" cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td><img src="exporting-data-Dateien/logo.png" hspace="10"></td>
            <td class="slogan">Model-based&nbsp;Data&nbsp;Export</td>
            <td style="text-align: right; width: 100%;"><a
 href="http://sourceforge.net/projects/jailer/"><img
 src="http://sflogo.sourceforge.net/sflogo.php?group_id=197260&amp;type=1"
 alt="SourceForge.net Logo" style="border: 0px solid ;"></a></td>
          </tr>
        </tbody>
      </table>
      <b><font color="#ffffff">&nbsp; </font></b></td>
    </tr>
    <tr>
      <td colspan="2" class="nav1background" height="33" width="100%">&nbsp;
      <b><font color="#ffffff"><a href="home.htm" target="_self"
 class="tlink">Home</a> &nbsp;&nbsp;&nbsp; <a href="tutorial.htm"
 target="_self" class="tlinkA">Tutorial</a> &nbsp;&nbsp;&nbsp; <a
 href="documentation.htm" target="_self" class="tlink">Documentation</a>
&nbsp;&nbsp;&nbsp; <a
 href="http://sourceforge.net/project/showfiles.php?group_id=197260"
 target="_self" class="tlink">Download</a>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</font></b></td>
    </tr>
    <tr>
      <td colspan="2" class="spacer" width="100%"> <br>
      </td>
    </tr>
    <tr>
      <td class="lmenucontainer" height="100%" valign="top" width="14%">
      <div align="center">
      <center>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tbody>
          <tr>
            <td width="100%"><br>
            </td>
          </tr>
        </tbody>
      </table>
      </center>
      </div>
      <ul>
        <li><a href="exporting-data.htm" target="_self" class="llinkA">Exporting
Data</a></li>
        <li><a href="deleting-data.htm" target="_self" class="llink">Deleting
Data</a></li>
        <li><a href="exclude-del.htm" target="_self" class="llink">exclude-del</a></li>
        <li><a href="export-all.htm" target="_self" class="llink">export-all</a></li>
        <li><a href="cli-tutorial.htm" target="_self" class="llink">cli-tutorial</a></li>
      </ul>
      <table border="0" cellpadding="5" cellspacing="0" width="100%">
        <tbody>
          <tr>
            <td class="content2background"><img
 style="width: 160px; height: 1px;" alt=""
 src="architecture-Dateien/vgradp.gif"></td>
          </tr>
        </tbody>
      </table>
      <p>&nbsp;</p>
      </td>
      <td class="contentbackground" height="418" valign="top"
 width="86%">
      <div align="right">
      <table border="0" cellpadding="0" cellspacing="0" height="542"
 width="98%">
        <tbody>
          <tr>
            <td class="contentbackground" height="21" width="100%"> <br>
            </td>
          </tr>
          <tr>
            <td class="content" height="520" valign="top" width="100%">
            <small><small>&nbsp;</small></small><br>
This tutorial shows you how to export consistent sets
of rows from relational databases.<br>
            <br>
            <h3>Step 1. Setup the database<br>
            </h3>
            <p>Create a new database schema and execute <a
 href="scott-tiger.sql.html"><img
 style="border: 0px solid ; width: 13px; height: 13px;"
 src="exporting-data-Dateien/arrow.gif" hspace="4"><big><span
 style="font-family: monospace;"><font size="4">script/scott-tiger.sql</font></span></big></a>.
Make sure that the script runs successfully.<br>
            <br>
            <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
              <tbody>
                <tr>
                  <td
 style="vertical-align: top; background-color: rgb(230, 255, 230);"><span
 style="font-family: monospace;">$ db2 connect to wisser </span><span
 style="font-family: monospace;">user scott </span><span
 style="font-family: monospace;">using tiger<span
 style="font-family: mon;"><span style="font-style: italic;"></span></span></span><span
 style="font-family: monospace;"><span
 style="color: rgb(51, 51, 255); font-style: italic;"></span></span><br>
                  <span style="font-family: monospace;">$ db2 -tvf
script/scott-tiger.sql<br>
                  </span><span style="font-family: monospace;"></span></td>
                </tr>
              </tbody>
            </table>
            <br>
            </p>
            <h3>Step 2. Building the data model<br>
            </h3>
            <p>Start the Tool (<span style="font-family: monospace;">jailerGUI.bat</span>
on windows platform)<br>
            <br>
            <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
              <tbody>
                <tr>
                  <td
 style="vertical-align: top; background-color: rgb(230, 255, 230);"><span
 style="font-family: monospace;">$ sh jailerGUI.sh</span><span
 style="font-family: monospace;"></span><br>
                  </td>
                </tr>
              </tbody>
            </table>
            <br>
            <img style="width: 304px; height: 119px;"
 src="exporting-data-Dateien/screen1.png"><br>
            </p>
            <p><br>
The first time you start Jailer you will be asked for a data model.<br>
            <br>
A data model holds information about the tables in the database and all
associations between them.<br>
Most of the information can be retrieved automatically by introspecting
the database schema.<br>
            <br>
Click on "Introspect DB"<br>
            <br>
            <img style="width: 529px; height: 258px;"
 src="exporting-data-Dateien/screen2.png"><br>
            <br>
            <br>
Select the setting for your DBMS and enter the connection parameter.<br>
You may change the setting name if you like.<br>
            <br>
Click on<span style="font-style: italic;"> Connect</span><big
 style="font-style: italic;"><span style="font-family: monospace;"><font
 size="4"></font></span></big><span style="font-style: italic;">.</span>
Jailer finds four tables and two associations:<br>
            <br>
            <img style="width: 756px; height: 254px;"
 src="exporting-data-Dateien/screen3.png"><br>
            <br>
            <br>
Two associations are still missing: an employee is classified into a
salary grade depending on his salary.<br>
Furthermore employees may receive bonuses.<br>
            <br>
Add the definitions manually (<big><span style="font-family: monospace;"><font
 size="4">Add-</font></span></big>Button under <big><span
 style="font-family: monospace;"><font size="4">Associations</font></span></big>):<br>
            <br>
            <img style="width: 484px; height: 217px;"
 src="exporting-data-Dateien/screen4.png"><br>
            <br>
Note that Jailer now knows more about the data model than the DBMS.<br>
            <br>
            </p>
            <h3>Step 3. Export employee Scott (unrestricted)</h3>
            <p>Now lets try to export the employee named Scott. To do
that we need an <span style="font-style: italic;">extraction-model</span>.<br>
Select <big><span style="font-family: monospace;"><font size="4">EMPLOYEE</font></span></big>
as table to extract from and type <span style="font-family: monospace;">NAME</span><big><span
 style="font-family: monospace;"><font size="4">='SCOTT'</font></span></big>
into the <span style="font-style: italic;">Where</span>-field:<br>
            <br>
            <img style="width: 739px; height: 322px;"
 src="exporting-data-Dateien/screen8.png"><br>
            <br>
            <br>
This
extraction model describes a set of entities containing (the)
employee(s) named 'SCOTT', entities associated with these employees,
entities associated with these entities and so forth.<br>
            <br>
Export this set (<span style="font-style: italic;">Export Data</span>-Button
or <span style="font-style: italic;">T</span><span
 style="font-style: italic;">ools-&gt;Export Data</span>).
Jailer first asks for a file name for the new extraction model:<br>
            <br>
            <img style="width: 558px; height: 180px;"
 src="exporting-data-Dateien/screen7.png"><br>
            <br>
            <br>
Type <big><span style="font-family: monospace;"><font size="4">scott.sql</font></span></big>
into the first field. This defines the name of the export file to be
generated. <br>
            <br>
Click on <span style="font-style: italic;">Export Data</span>:<br>
            <br>
            <img style="width: 783px; height: 481px;"
 src="exporting-data-Dateien/screen9.png"><br>
            <br>
            <br>
Jailer generates a file <a href="scott.sql.html"><img
 style="border: 0px solid ; width: 13px; height: 13px;"
 src="exporting-data-Dateien/arrow.gif" hspace="4"><big><span
 style="font-family: monospace;"><font size="4">scott.sql</font></span></big></a>
containing <big><span style="font-family: monospace;"><font size="4">Insert</font></span></big>-statements
for Scott, for his boss, for the president and for scott's
department and salary-grade.<br>
            <br>
But why are there also statements for all other employees?<br>
            <br>
Let Jailer explain why:<br>
            <br>
            <img style="width: 558px; height: 180px;"
 src="exporting-data-Dateien/screen10.png"><br>
            <br>
            <img style="width: 716px; height: 238px;"
 src="exporting-data-Dateien/screen11.png"><br>
            <br>
            <br>
Open the <span style="font-family: monospace;">Explain.log</span>:<br>
            <br>
            <img style="width: 806px; height: 327px;"
 src="exporting-data-Dateien/screen12.png"><br>
            <br>
Scotts is Adams boss and James and Adams are both classified in the
same salary-grade.<br>
            <br>
            </p>
            <h3>Step 4. Export employee Scott (restricted)</h3>
            <p>Exporting an employee requires to export his boss and
department too!
Otherwise the set of exported entities would not be consistent (due to
the dependencies based on foreign key constraints). No constraint
prevents us from excluding
the salary-grade and the bonus from export, but we don't do that
becauses the
resulting set would be incomplete.<br>
            <br>
To exclude
subordinates, 'same department'-members and 'same
salary-grade'-employees, we must restrict some associations. To do so,
define some <span style="font-style: italic;">restrictions:</span><br>
            <br>
            <img style="width: 950px; height: 322px;"
 src="exporting-data-Dateien/screen13.png"><br>
            <br>
            <img style="width: 950px; height: 322px;"
 src="exporting-data-Dateien/screen14.png"><br>
            <br>
            <img style="width: 950px; height: 322px;"
 src="exporting-data-Dateien/screen15.png"><br>
            <br>
            <br>
The <span style="font-style: italic;">restriction-condition</span> is
an extension of the associations join-condition (in
SQL-syntax) for one direction of an association. <span
 style="font-style: italic;">disabled</span> (or <span
 style="font-style: italic;">false</span>) stands for an unsatisfiable
condition.<br>
            <br>
            <br>
            <span style="font-style: italic;"></span>Use <span
 style="font-style: italic;">Tools-&gt;Export Data</span> again and
look what Jailer now exports:<br>
            <br>
            <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
              <tbody>
                <tr>
                  <td
 style="vertical-align: top; height: 24px; background-color: rgb(202, 225, 235);"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;"><span
 style="font-family: monospace;">scott.sql </span></span></span><span
 style="font-family: monospace;"></span></big><br>
                  </td>
                </tr>
              </tbody>
            </table>
            <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
              <tbody>
                <tr>
                  <td
 style="vertical-align: top; background-color: rgb(202, 225, 235);"
 colspan="2"><span style="font-family: monospace;">-- generated by
Jailer at Wed Dec 05 18:49:03 CET 2007 from wisser@desktop<br>
--<br>
-- extraction model:&nbsp; EMPLOYEE where NAME='SCOTT'
(extractionmodel/scott.csv)<br>
-- database URL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
jdbc:db2://localhost/wisser<br>
-- database user:&nbsp;&nbsp;&nbsp;&nbsp; scott<br>
-- exported entities: 7<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
DEPARTMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
SALARYGRADE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2<br>
                  <br>
                  <br>
                  <br>
Insert into DEPARTMENT(DEPTNO, NAME, LOCATION) values (20, 'RESEARCH',
'DALLAS'), (10, 'ACCOUNTING', 'NEW YORK');<br>
Insert into SALARYGRADE(GRADE, LOSAL, HISAL) values (4, 2001, 3000),
(5, 3001, 9999);<br>
Insert
into EMPLOYEE(EMPNO, NAME, JOB, BOSS, HIREDATE, SALARY, COMM, DEPTNO)
values (7839, 'KING', 'PRESIDENT', null, '1981-11-17', 5000.00, null,
10);<br>
Insert into EMPLOYEE(EMPNO, NAME, JOB, BOSS, HIREDATE, SALARY,
COMM, DEPTNO) values (7566, 'JONES', 'MANAGER', 7839, '1981-04-02',
2975.00, null, 20);<br>
Insert into EMPLOYEE(EMPNO, NAME, JOB, BOSS,
HIREDATE, SALARY, COMM, DEPTNO) values (7788, 'SCOTT', 'ANALYST', 7566,
'1982-12-09', 3000.00, null, 20);<br>
                  </span></td>
                </tr>
              </tbody>
            </table>
            <br>
            <br>
            </p>
            <p><br>
            </p>
            <p><br>
            <br>
            </p>
            </td>
          </tr>
        </tbody>
      </table>
      </div>
      <p>&nbsp; </p>
      </td>
    </tr>
    <tr>
      <td height="12" valign="top" width="14%"><br>
      </td>
      <td><br>
      </td>
    </tr>
  </tbody>
</table>
</div>
</body>
</html>
