<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Jailer Tutorial</title>
</head>
<body>
<br>
<table style="width: 100%; text-align: left;" border="0" cellpadding="0"
 cellspacing="0">
  <tbody>
    <tr>
      <td style="vertical-align: top; width: 270px;">
      <h1><a href="index.html"><img alt="" src="jailer.jpg"
 style="border: 0px solid ; width: 220px; height: 95px;"></a></h1>
      <h1><a href="http://sourceforge.net/projects/jailer/"><img
 src="http://sflogo.sourceforge.net/sflogo.php?group_id=197260&amp;type=5"
 alt="SourceForge.net Logo"
 style="border: 0px solid ; width: 210px; height: 62px;"></a></h1>
      </td>
      <td style="vertical-align: top;">
      <h1>Jailer Tutorial</h1>
      <h2>Prerequisites</h2>
      <ul>
        <li>Java JRE 1.5 or above</li>
        <li>R-DBMS with JDBC-driver<br>
        </li>
        <li>jailer.zip<br>
        </li>
      </ul>
      </td>
      <td style="text-align: right; vertical-align: top;"> <br>
      </td>
    </tr>
  </tbody>
</table>
<h2><br>
Step 1. Setup Jailer</h2>
<h3>1.1 Unpack jailer.zip</h3>
<table style="width: 100%; text-align: left;" border="0" cellpadding="0"
 cellspacing="0">
  <tbody>
    <tr>
      <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$unzip jailer.zip<br>
$cd jailer<br style="font-family: monospace;">
      </span> <span style="font-family: monospace;">$ll</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3 wisser
users&nbsp; 136 2007-06-01 10:12 bin</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">-rw-r--r--&nbsp; 1 wisser
users 1175 2007-06-01 10:10 build.xml</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3 wisser
users&nbsp; 136 2007-06-01 10:10 config</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3 wisser
users&nbsp; 344 2007-06-01 10:10 datamodel</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3 wisser
users&nbsp; 184 2007-06-01 10:10 example</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3 wisser
users&nbsp; 160 2007-06-01 10:10 extractionmodel</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3 wisser
users&nbsp; 272 2007-06-01 10:11 lib</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3 wisser
users&nbsp; 112 2007-06-01 10:10 restrictionmodel</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">drwxr-xr-x&nbsp; 4 wisser
users&nbsp; 160 2007-06-01 10:10 script</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">drwxr-xr-x&nbsp; 4 wisser
users&nbsp;&nbsp; 96 2007-06-01 10:10 src</span><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<h3><span style="font-weight: bold;"></span>1.2 Register the JDBC-Driver</h3>
Edit the file <span style="font-family: monospace;">bin/jailer.sh</span>
and put the JDBC-Driver into the class-path<br>
<br>
<table style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">bin/jailer.sh</span>
      </span><span style="font-family: monospace;"></span></big><br>
      </td>
    </tr>
  </tbody>
</table>
<table style="width: 100%; text-align: left;" border="0" cellpadding="0"
 cellspacing="0">
  <tbody>
    <tr>
      <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">JDBCLIB=<span
 style="font-style: italic; color: rgb(51, 51, 255);">path to the
JDBC-Driver-jar</span></span><br style="font-family: monospace;">
      <span style="font-family: monospace;">LIB=lib</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">CP=.:out:out/jailer.jar</span><br
 style="font-family: monospace;">
      <br style="font-family: monospace;">
      <span style="font-family: monospace;"># JDBC-driver</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">CP=$CP:$JDBCLIB/</span><span
 style="font-family: monospace;"><span
 style="font-style: italic; color: rgb(51, 51, 255);">JDBC-Driver-jar</span></span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;"></span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;"># configuration files in
the config directory</span><br style="font-family: monospace;">
      <span style="font-family: monospace;">CP=$CP:config</span><br
 style="font-family: monospace;">
      <br style="font-family: monospace;">
      <span style="font-family: monospace;"># the libraries</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">CP=$CP:$LIB/junit.jar</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">CP=$CP:$LIB/commons-logging.jar</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">CP=$CP:$LIB/log4j.jar</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">CP=$CP:$LIB/args4j.jar</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">CP=$CP:$LIB/spring.jar</span><br
 style="font-family: monospace;">
      <span style="font-family: monospace;">CP=$CP:$LIB/jailer.jar</span><br
 style="font-family: monospace;">
      <br style="font-family: monospace;">
      <span style="font-family: monospace;">java -cp $CP
org.jailer.Jailer $@</span><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<h2>Step 2. Setup the Database</h2>
Create a new schema and execute <big><a href="scott-tiger.sql.html"><span
 style="font-family: monospace;">script/scott-tiger.sql</span></a></big>.
Make sure that the script runs successfully.<br>
<br>
<table style="width: 100%; text-align: left;" border="0" cellpadding="0"
 cellspacing="0">
  <tbody>
    <tr>
      <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$db2 connect to wisser </span><span
 style="font-family: monospace;">user scott </span><span
 style="font-family: monospace;">using tiger<span
 style="font-family: mon;"><span style="font-style: italic;"></span></span></span><span
 style="font-family: monospace;"><span
 style="font-style: italic; color: rgb(51, 51, 255);"></span></span><br>
      <span style="font-family: monospace;">$db2 -tvf
script/scott-tiger.sql<br>
      </span><span style="font-family: monospace;"></span></td>
    </tr>
  </tbody>
</table>
<br>
<h2>Step 3. Building the data model</h2>
Jailer needs to know all the tables and all associations between them,
so
we must tell him. Tables are defined in <big><span
 style="font-family: monospace;">datamodel/table.csv</span><small>,</small></big><small>
</small>associations in <big><span style="font-family: monospace;">datamodel/association.csv</span>.</big><br>
<br>
Fortunately most of the model definitions can be generated
automatically from introspection of the relational database.<br>
<br>
<table style="width: 100%; text-align: left;" border="0" cellpadding="0"
 cellspacing="0">
  <tbody>
    <tr>
      <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$sh bin/jailer.sh build-model
com.ibm.db2.jcc.DB2Driver jdbc:db2://localhost:50001/wisser scott tiger<br>
2007-06-01 15:51:30,308 [main] INFO&nbsp;&nbsp; - find tables with
org.jailer.modelbuilder.JDBCMetaDataBasedModelElementFinder@16fe0f4<br>
2007-06-01 15:51:32,115 [main] INFO&nbsp;&nbsp; - file
'datamodel/model-builder-table.csv' written<br>
2007-06-01 15:51:32,175 [main] INFO&nbsp;&nbsp; - find associations
with org.jailer.modelbuilder.JDBCMetaDataBasedModelElementFinder@16fe0f4<br>
2007-06-01 15:51:32,298 [main] INFO&nbsp;&nbsp; - find associations
with DEPARTMENT<br>
2007-06-01 15:51:32,323 [main] INFO&nbsp;&nbsp; - find associations
with SALARYGRADE<br>
2007-06-01 15:51:32,328 [main] INFO&nbsp;&nbsp; - find associations
with EMPLOYEE<br>
2007-06-01 15:51:32,369 [main] INFO&nbsp;&nbsp; - file
'datamodel/model-builder-association.csv' written<br>
      </span><span style="font-family: monospace;"><span
 style="font-style: italic; color: rgb(51, 51, 255);"></span></span></td>
    </tr>
  </tbody>
</table>
<br>
Jailer finds the following tables
and associations:<br>
<br>
<table style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">datamodel/model-builder-table.csv</span>
      </span><span style="font-family: monospace;"></span></big><br>
      </td>
    </tr>
  </tbody>
</table>
<table style="width: 100%; text-align: left;" border="0" cellpadding="0"
 cellspacing="0">
  <tbody>
    <tr>
      <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">Name;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
upsert; primary key;&nbsp;&nbsp;&nbsp; ; author<br>
DEPARTMENT;&nbsp; N;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DEPTNO INTEGER; ;IBM
DB2 JDBC Driver;<br>
EMPLOYEE;&nbsp;&nbsp;&nbsp; N;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EMPNO
INTEGER;&nbsp; ;IBM DB2 JDBC Driver;<br>
SALARYGRADE; N;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GRADE INTEGER;LOSAL
INTEGER;HISAL INTEGER;&nbsp;&nbsp; ;IBM DB2 JDBC Driver;<br>
      </span><span style="font-family: monospace;"></span></td>
    </tr>
  </tbody>
</table>
<br>
<table style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">datamodel/model-builder-association.csv</span>
      </span><span style="font-family: monospace;"></span></big><br>
      </td>
    </tr>
  </tbody>
</table>
<table style="width: 100%; text-align: left;" border="0" cellpadding="0"
 cellspacing="0">
  <tbody>
    <tr>
      <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">Table A;&nbsp;&nbsp;&nbsp; Table
B;&nbsp; first-insert; cardinality (opt); join-condition; name (opt);
author<br>
DEPARTMENT; EMPLOYEE; A; 1:n; A.DEPTNO=B.DEPTNO;&nbsp;&nbsp; ; IBM DB2
JDBC Driver;<br>
EMPLOYEE;&nbsp;&nbsp; EMPLOYEE; A; 1:n; A.EMPNO=B.BOSS;&nbsp; &nbsp;
&nbsp; ; IBM DB2 JDBC Driver;<br>
      </span></td>
    </tr>
  </tbody>
</table>
<br>
Copy the definitions into the files <big><span
 style="font-family: monospace;">datamodel/table.csv</span></big> and <big><span
 style="font-family: monospace;">datamodel/association.csv</span>.</big><br>
One association is still missing: depending on his salary an employee
is classified into a salary grade. <br>
Add this definition manually.<br>
<br>
<table style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">datamodel/association.csv</span>
      </span><span style="font-family: monospace;"></span></big><br>
      </td>
    </tr>
  </tbody>
</table>
<table style="width: 100%; text-align: left;" border="0" cellpadding="0"
 cellspacing="0">
  <tbody>
    <tr>
      <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">Table A;&nbsp;&nbsp;&nbsp; Table
B;&nbsp; first-insert; cardinality (opt); join-condition; name (opt);
author<br>
DEPARTMENT; EMPLOYEE; A; 1:n; A.DEPTNO=B.DEPTNO;&nbsp;&nbsp; ; IBM DB2
JDBC Driver;<br>
EMPLOYEE;&nbsp;&nbsp; EMPLOYEE; A; 1:n; A.EMPNO=B.BOSS;&nbsp; &nbsp;
&nbsp; ; IBM DB2 JDBC Driver;<br>
      <span style="color: rgb(153, 0, 0);">EMPLOYEE;&nbsp;&nbsp;
SALARYGRADE; ; n:1; A.SALARY BETWEEN B.LOSAL AND B.HISAL; ; Wisser</span><br>
      </span></td>
    </tr>
  </tbody>
</table>
<br>
<br>
<br>
<br>
</body>
</html>
