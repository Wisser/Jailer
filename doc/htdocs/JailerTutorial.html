<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Open Jail. The Jailer Project Web Site.</title>
  <link href="styles.css" rel="stylesheet" type="text/css">
</head>
<body>
<h1>Open Jail <small><small style="font-style: italic;">The Jailer
Project Web Site</small></small>
<hr style="width: 100%; height: 1px;"></h1>
<table border="0" cellpadding="0" cellspacing="0">
  <tbody>
    <tr>
      <td valign="top">
      <table border="1" bordercolor="#dddddd" cellpadding="14"
 cellspacing="0" width="140">
        <tbody>
          <tr>
            <td width="106">
            <p><a href="index.html">Introduction</a><br>
            <a href="JailerTutorial.html">Tutorial</a><br>
            <a>Documentation</a>
            <table>
              <tbody>
                <tr>
                  <td>&nbsp;&nbsp; </td>
                  <td><a href="terms.html">Terms</a> <a
 href="architecture.html"><br>
Architecture</a><br>
                  <a href="design.html">Design</a><br>
                  <a href="files.html">File Formats</a> </td>
                </tr>
              </tbody>
            </table>
            <a
 href="http://sourceforge.net/project/showfiles.php?group_id=197260">Download</a><br>
            <a href="http://sourceforge.net/projects/jailer/">Homepage</a><br>
            </p>
            <a href="http://sourceforge.net/projects/jailer/"><img
 src="http://sflogo.sourceforge.net/sflogo.php?group_id=197260&amp;type=1"
 alt="SourceForge.net Logo" style="border: 0px solid ;"></a> </td>
          </tr>
        </tbody>
      </table>
      </td>
      <td valign="top" width="0%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
      <td valign="top" width="100%">
      <h2>Tutorial</h2>
      <h3>Prerequisites</h3>
      <ul>
        <li>Java JRE 1.5 or above</li>
        <li>R-DBMS with JDBC-driver<br>
        </li>
        <li>jailer.zip</li>
      </ul>
      <h3>Step 1. Setup Jailer</h3>
Unpack jailer.zip:<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$unzip jailer.zip<br>
$cd jailer<br style="font-family: monospace;">
            </span> <span style="font-family: monospace;">$ll</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3
wisser users&nbsp; 136 2007-06-01 10:12 bin</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">-rw-r--r--&nbsp; 1
wisser users 1175 2007-06-01 10:10 build.xml</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3
wisser users&nbsp; 136 2007-06-01 10:10 config</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3
wisser users&nbsp; 344 2007-06-01 10:10 datamodel</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3
wisser users&nbsp; 184 2007-06-01 10:10 example</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3
wisser users&nbsp; 160 2007-06-01 10:10 extractionmodel</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3
wisser users&nbsp; 272 2007-06-01 10:11 lib</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">drwxr-xr-x&nbsp; 3
wisser users&nbsp; 112 2007-06-01 10:10 restrictionmodel</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">drwxr-xr-x&nbsp; 4
wisser users&nbsp; 160 2007-06-01 10:10 script</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">drwxr-xr-x&nbsp; 4
wisser users&nbsp;&nbsp; 96 2007-06-01 10:10 src</span><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
Register the JDBC-Driver. Edit the file <span
 style="font-family: monospace;">bin/jailer.sh</span> and put the
JDBC-Driver into the class-path:<br>
      <br>
      <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">bin/jailer.sh</span>
            </span><span style="font-family: monospace;"></span></big><br>
            </td>
          </tr>
        </tbody>
      </table>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">JDBCLIB=<span
 style="font-style: italic; color: rgb(51, 51, 255);">path to the
JDBC-Driver-jar</span></span><br style="font-family: monospace;">
            <span style="font-family: monospace;">LIB=lib</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">CP=.:out:out/jailer.jar</span><br
 style="font-family: monospace;">
            <br style="font-family: monospace;">
            <span style="font-family: monospace;"># JDBC-driver</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">CP=$CP:$JDBCLIB/</span><span
 style="font-family: monospace;"><span
 style="font-style: italic; color: rgb(51, 51, 255);">JDBC-Driver-jar</span></span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;"></span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;"># configuration files
in the config directory</span><br style="font-family: monospace;">
            <span style="font-family: monospace;">CP=$CP:config</span><br
 style="font-family: monospace;">
            <br style="font-family: monospace;">
            <span style="font-family: monospace;"># the libraries</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">CP=$CP:$LIB/junit.jar</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">CP=$CP:$LIB/commons-logging.jar</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">CP=$CP:$LIB/log4j.jar</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">CP=$CP:$LIB/args4j.jar</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">CP=$CP:$LIB/spring.jar</span><br
 style="font-family: monospace;">
            <span style="font-family: monospace;">CP=$CP:$LIB/jailer.jar</span><br
 style="font-family: monospace;">
            <br style="font-family: monospace;">
            <span style="font-family: monospace;">java -cp $CP
org.jailer.Jailer $@</span><br>
            </td>
          </tr>
        </tbody>
      </table>
      <br>
      <h3>Step 2. Setup the Database</h3>
Create a new schema and execute <a href="scott-tiger.sql.html"><img
 alt="" src="arrow.gif"
 style="border: 0px solid ; width: 13px; height: 13px;" hspace="4"><big><span
 style="font-family: monospace;">script/scott-tiger.sql</span></big></a>.
Make sure that the script runs successfully.<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$db2 connect to wisser </span><span
 style="font-family: monospace;">user scott </span><span
 style="font-family: monospace;">using tiger<span
 style="font-family: mon;"><span style="font-style: italic;"></span></span></span><span
 style="font-family: monospace;"><span
 style="font-style: italic; color: rgb(51, 51, 255);"></span></span><br>
            <span style="font-family: monospace;">$db2 -tvf
script/scott-tiger.sql<br>
            </span><span style="font-family: monospace;"></span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <h3>Step 3. Building the data model</h3>
Jailer needs to know all the tables and all associations between them,
so
we must tell him. Tables are defined in <big><span
 style="font-family: monospace;">datamodel/table.csv</span><small>,</small></big><small>
      </small>associations in <big><span
 style="font-family: monospace;">datamodel/association.csv</span>.</big><br>
      <br>
Fortunately most of the model definitions can be generated
automatically from introspection of the relational database.<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$sh bin/jailer.sh build-model
com.ibm.db2.jcc.DB2Driver jdbc:db2://localhost:50001/wisser scott tiger<br>
2007-06-01 15:51:30,308 [main] INFO&nbsp;&nbsp; - find tables with
org.jailer.modelbuilder.JDBCMetaDataBasedModelElementFinder@16fe0f4<br>
2007-06-01 15:51:32,115 [main] INFO&nbsp;&nbsp; - file
'datamodel/model-builder-table.csv' written<br>
2007-06-01 15:51:32,175 [main] INFO&nbsp;&nbsp; - find associations
with org.jailer.modelbuilder.JDBCMetaDataBasedModelElementFinder@16fe0f4<br>
2007-06-01 15:51:32,298 [main] INFO&nbsp;&nbsp; - find associations
with DEPARTMENT<br>
2007-06-01 15:51:32,323 [main] INFO&nbsp;&nbsp; - find associations
with SALARYGRADE<br>
2007-06-01 15:51:32,328 [main] INFO&nbsp;&nbsp; - find associations
with EMPLOYEE<br>
2007-06-01 15:51:32,369 [main] INFO&nbsp;&nbsp; - file
'datamodel/model-builder-association.csv' written<br>
            </span><span style="font-family: monospace;"><span
 style="font-style: italic; color: rgb(51, 51, 255);"></span></span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <br>
Jailer finds the following tables
and associations:<br>
      <br>
      <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">datamodel/model-builder-table.csv</span>
            </span><span style="font-family: monospace;"></span></big><br>
            </td>
          </tr>
        </tbody>
      </table>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">Name;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
upsert; primary key;&nbsp;&nbsp;&nbsp; ; author<br>
DEPARTMENT;&nbsp; N;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DEPTNO INTEGER; ;IBM
DB2 JDBC Driver;<br>
EMPLOYEE;&nbsp;&nbsp;&nbsp; N;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EMPNO
INTEGER;&nbsp; ;IBM DB2 JDBC Driver;<br>
SALARYGRADE; N;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GRADE INTEGER;LOSAL
INTEGER;HISAL INTEGER;&nbsp;&nbsp; ;IBM DB2 JDBC Driver;<br>
            </span><span style="font-family: monospace;"></span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">datamodel/model-builder-association.csv</span>
            </span><span style="font-family: monospace;"></span></big><br>
            </td>
          </tr>
        </tbody>
      </table>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">Table A;&nbsp;&nbsp;&nbsp; Table
B;&nbsp; first-insert; cardinality (opt); join-condition; name (opt);
author<br>
DEPARTMENT; EMPLOYEE; A; 1:n; A.DEPTNO=B.DEPTNO;&nbsp;&nbsp; ; IBM DB2
JDBC Driver;<br>
EMPLOYEE;&nbsp;&nbsp; EMPLOYEE; A; 1:n; A.EMPNO=B.BOSS;&nbsp; &nbsp;
&nbsp; ; IBM DB2 JDBC Driver;<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <br>
Copy the definitions into the files <big><span
 style="font-family: monospace;">datamodel/table.csv</span></big> and <big><span
 style="font-family: monospace;">datamodel/association.csv</span>.</big><br>
One association is still missing: depending on his salary an employee
is classified into a salary grade. <br>
Add this definition manually.<br>
      <br>
      <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">datamodel/association.csv</span>
            </span><span style="font-family: monospace;"></span></big><br>
            </td>
          </tr>
        </tbody>
      </table>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">Table A;&nbsp;&nbsp;&nbsp; Table
B;&nbsp; first-insert; cardinality (opt); join-condition; name (opt);
author<br>
DEPARTMENT; EMPLOYEE; A; 1:n; A.DEPTNO=B.DEPTNO;&nbsp;&nbsp; ; IBM DB2
JDBC Driver;<br>
EMPLOYEE;&nbsp;&nbsp; EMPLOYEE; A; 1:n; A.EMPNO=B.BOSS;&nbsp; &nbsp;
&nbsp; ; IBM DB2 JDBC Driver;<br>
            <span style="color: rgb(153, 0, 0);">EMPLOYEE;&nbsp;&nbsp;
SALARYGRADE; ; n:1; A.SALARY BETWEEN B.LOSAL AND B.HISAL; ; Wisser</span><br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
Note that Jailer now knows more about the data model than the DBMS.<br>
      <br>
      <h3>Step 4.&nbsp; Examine the data model</h3>
Let's see what Jailer knows now about the model.<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$ sh bin/jailer.sh print-datamodel<br>
DEPARTMENT (DEPTNO INTEGER NOT NULL)<br>
            <br>
&nbsp; has dependent:<br>
&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1:n on A.DEPTNO=B.DEPTNO<br>
            <br>
EMPLOYEE (EMPNO INTEGER NOT NULL)<br>
            <br>
&nbsp; depends on:<br>
&nbsp;&nbsp;&nbsp;
DEPARTMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
n:1 on B.DEPTNO=A.DEPTNO<br>
&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
n:1 on B.EMPNO=A.BOSS<br>
            <br>
&nbsp; has dependent:<br>
&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1:n on A.EMPNO=B.BOSS<br>
            <br>
&nbsp; is associated with:<br>
&nbsp;&nbsp;&nbsp;
SALARYGRADE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
n:1 on A.SALARY BETWEEN B.LOSAL AND B.HISAL<br>
            <br>
SALARYGRADE (GRADE INTEGER NOT NULL, LOSAL INTEGER NOT NULL, HISAL
INTEGER NOT NULL)<br>
            <br>
&nbsp; is associated with:<br>
&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1:n on B.SALARY BETWEEN A.LOSAL AND A.HISAL<br>
            <br>
            <br>
tables in dependent-cycle: EMPLOYEE<br>
            <br>
excluding following tables from component-analysis:&nbsp; {&nbsp; }<br>
            <br>
1 components:<br>
&nbsp;{ DEPARTMENT, EMPLOYEE, SALARYGRADE }<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
Note that each association is listed twice. While associations are
undirected, restrictions on them are directed. We will see later for
what restrictions are good for and how to define them.<br>
      <br>
      <h3>Step 5. Prepare the DB for exports</h3>
Jailer uses some tables for collecting entities inside the data base.
The structure of these tables depends on the data-model, so we have to
create the tables after building the data-model files. (You can easily
re-create the tables after any model-changes)<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$ sh bin/jailer.sh create-ddl &gt; <a
 href="jailer-ddl.sql.html"><img alt="" src="arrow.gif"
 style="border: 0px solid ; width: 13px; height: 13px;" hspace="4">jailer-ddl.sql</a><br>
$ db2 -tvf jailer-ddl.sql<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <h3><br>
Step 6. Export evil Scott (unrestricted)</h3>
Now export the employee named Scott. To do that we need an <span
 style="font-style: italic;">extraction-model</span>. Create a file
named <big><span style="font-family: monospace;">extractionmodel/scott.csv</span></big>.<br>
      <br>
      <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">extractionmodel/scott.csv</span>
            </span><span style="font-family: monospace;"></span></big><br>
            </td>
          </tr>
        </tbody>
      </table>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;"># the employee named 'SCOTT' and all
associated entities<br>
            <br>
subject;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
condition;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
limit;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; restrictions<br>
EMPLOYEE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
NAME='SCOTT';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <br>
This extraction model describes a set of entities containing (the)
employee(s)
named 'SCOTT', entities associated with these employees, entities
associated with these entities and so forth.<br>
      <br>
Export this set:<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$ sh bin/jailer.sh export -e scott.sql
extractionmodel/scott.csv com.ibm.db2.jcc.DB2Driver
jdbc:db2://localhost:50001/wisser scott tiger<br>
2007-06-04 13:27:25,123 [main] INFO&nbsp;&nbsp; - exporting EMPLOYEE
Where NAME='SCOTT'<br>
...<br>
2007-06-04 13:27:25,249 [main] INFO&nbsp;&nbsp; - export
statistic:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
22<br>
2007-06-04 13:27:25,299 [main] INFO&nbsp;&nbsp; -
DEPARTMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3<br>
2007-06-04 13:27:25,299 [main] INFO&nbsp;&nbsp; -
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
14<br>
2007-06-04 13:27:25,299 [main] INFO&nbsp;&nbsp; -
SALARYGRADE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
5<br>
...<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <br>
A file <a href="scott.sql.html"><img alt="" src="arrow.gif"
 style="border: 0px solid ; width: 13px; height: 13px;" hspace="4"><big><span
 style="font-family: monospace;">scott.sql</span></big></a> is created
containing <big><span style="font-family: monospace;">Insert</span></big>-statements
for Scott, for his evil boss, for the president and for scott's
department and salary-grade.<br>
      <br>
But why are there also statements for all other employees? (Bad luck
for innocent James!)<br>
      <br>
Let Jailer explain why:<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$ sh bin/jailer.sh export -e scott.sql
            <span style="color: rgb(204, 0, 0);">-explain </span>extractionmodel/scott.csv
com.ibm.db2.jcc.DB2Driver jdbc:db2://localhost:50001/wisser scott tiger
&gt; /dev/null<br>
$ cat explain.log<br>
EMPLOYEE(7788) --3--&gt; SALARYGRADE(4, 2001, 3000) --6--&gt;
EMPLOYEE(7698) --1--&gt; DEPARTMENT(30).<br>
EMPLOYEE(7788) --3--&gt; SALARYGRADE(4, 2001, 3000) --6--&gt;
EMPLOYEE(7698) --2--&gt; EMPLOYEE(7521).<br>
EMPLOYEE(7788) --3--&gt; SALARYGRADE(4, 2001, 3000) --6--&gt;
EMPLOYEE(7698) --2--&gt; EMPLOYEE(7844) --3--&gt; SALARYGRADE(3, 1401,
2000).<br>
EMPLOYEE(7788) --4--&gt; EMPLOYEE(7566) --4--&gt; EMPLOYEE(7839)
--1--&gt; DEPARTMENT(10).<br>
EMPLOYEE(7788) --4--&gt; EMPLOYEE(7566) --4--&gt; EMPLOYEE(7839)
--3--&gt; SALARYGRADE(5, 3001, 9999).<br>
EMPLOYEE(7788) --1--&gt; DEPARTMENT(20) --5--&gt; EMPLOYEE(7369).<br>
EMPLOYEE(7788) --3--&gt; SALARYGRADE(4, 2001, 3000) --6--&gt;
EMPLOYEE(7698) --2--&gt; EMPLOYEE(7654).<br>
            <span style="color: rgb(204, 0, 0);">EMPLOYEE(7788)
--2--&gt; EMPLOYEE(7876) --3--&gt; SALARYGRADE(1, 700, 1200) --6--&gt;
EMPLOYEE(7900).</span><br style="color: rgb(204, 0, 0);">
EMPLOYEE(7788) --3--&gt; SALARYGRADE(4, 2001, 3000) --6--&gt;
EMPLOYEE(7782) --2--&gt; EMPLOYEE(7934) --3--&gt; SALARYGRADE(2, 1201,
1400).<br>
EMPLOYEE(7788) --3--&gt; SALARYGRADE(4, 2001, 3000) --6--&gt;
EMPLOYEE(7698) --2--&gt; EMPLOYEE(7499).<br>
EMPLOYEE(7788) --1--&gt; DEPARTMENT(20) --5--&gt; EMPLOYEE(7902).<br>
            <br>
#&nbsp;&nbsp;&nbsp; 1
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt;
DEPARTMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
n:1 on B.DEPTNO=A.DEPTNO<br>
#&nbsp;&nbsp;&nbsp; 2
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt;
EMPLOYEE(SUBORDINATES)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1:n on A.EMPNO=B.BOSS<br>
#&nbsp;&nbsp;&nbsp; 3
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt;
SALARYGRADE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
n:1 on A.SALARY BETWEEN B.LOSAL AND B.HISAL<br>
#&nbsp;&nbsp;&nbsp; 4
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt; EMPLOYEE(inverse-SUBORDINATES) n:1 on B.EMPNO=A.BOSS<br>
#&nbsp;&nbsp;&nbsp; 5
DEPARTMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1:n on A.DEPTNO=B.DEPTNO<br>
#&nbsp;&nbsp;&nbsp; 6
SALARYGRADE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
-&gt;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1:n on B.SALARY BETWEEN A.LOSAL AND A.HISAL<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
Adams is Scotts subordinate and James and Adams are both
classified in the same salary-grade.<br>
      <br>
      <h3>Step 7. Export evil Scott (restricted)</h3>
If we export an employee we must export his boss and department too!
Otherwise the set of exported entities would not be consistent (due to
the foreign key constraints). No constraint prevents us from excluding
the salary-grade from export, but we should'nt do that becauses the
resulting set would
also be inconsistent.<br>
      <br>
To exclude subordinates, 'same department'-members and 'same
salary-grade'-employees, we must restrict some associations. To do so,
define a <span style="font-style: italic;">restriction-model:</span><br>
      <br>
      <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">restrictionmodel/no-subordinates.csv</span>
            </span><span style="font-family: monospace;"></span></big><br>
            </td>
          </tr>
        </tbody>
      </table>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">from A (or association name); to
B;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; restriction-condition<br>
SUBORDINATE;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ignore<br>
DEPARTMENT;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
EMPLOYEE;&nbsp;&nbsp; ignore<br>
SALARYGRADE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
EMPLOYEE;&nbsp;&nbsp; ignore<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <br>
The <span style="font-style: italic;">restriction-condition</span> is
an extension of the associations join-condition (expressed in
SQL-syntax) for one direction of an association. <br>
"ignore" stands for an unsatisfiable condition.<br>
      <br>
Note that the association between DEPARTMENT and EMPLOYEE is restricted
in that direction by designating the source and destination table. It's
obviously not possible to restrict reflexive associations the same way,
so we have to give the <span style="font-style: italic;">'subordinate
of</span>'-association a name.<br>
      <br>
      <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">datamodel/association.csv</span>
            </span><span style="font-family: monospace;"></span></big><br>
            </td>
          </tr>
        </tbody>
      </table>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">Table A;&nbsp;&nbsp;&nbsp; Table
B;&nbsp; first-insert; cardinality (opt); join-condition; name (opt);
author<br>
DEPARTMENT; EMPLOYEE; A; 1:n; A.DEPTNO=B.DEPTNO;&nbsp;&nbsp; ; IBM DB2
JDBC Driver;<br>
EMPLOYEE;&nbsp;&nbsp; EMPLOYEE; A; 1:n; A.EMPNO=B.BOSS; </span><span
 style="font-family: monospace; color: rgb(255, 0, 0);">SUBORDINATE</span><span
 style="font-family: monospace;">; IBM DB2 JDBC Driver;<br>
            <span style="color: rgb(0, 0, 0);">EMPLOYEE;&nbsp;&nbsp;
SALARYGRADE; ; n:1; A.SALARY BETWEEN B.LOSAL AND B.HISAL; ; Wisser</span><br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <br>
You can examine the restrictions the same way you examined the data
model:<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$ sh bin/jailer.sh print-datamodel <span
 style="color: rgb(204, 0, 0);">restrictionmodel/no-subordinates.csv</span><br>
restricted by: [restrictionmodel/no-subordinates.csv]<br>
DEPARTMENT (DEPTNO INTEGER NOT NULL)<br>
            <br>
&nbsp; ignored:<br>
&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1:n on A.DEPTNO=B.DEPTNO<br>
            <br>
EMPLOYEE (EMPNO INTEGER NOT NULL)<br>
            <br>
&nbsp; depends on:<br>
&nbsp;&nbsp;&nbsp;
DEPARTMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
n:1 on B.DEPTNO=A.DEPTNO<br>
&nbsp;&nbsp;&nbsp; EMPLOYEE(inverse-SUBORDINATE)&nbsp; n:1 on
B.EMPNO=A.BOSS<br>
            <br>
&nbsp; is associated with:<br>
&nbsp;&nbsp;&nbsp;
SALARYGRADE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
n:1 on A.SALARY BETWEEN B.LOSAL AND B.HISAL<br>
            <br>
&nbsp; ignored:<br>
&nbsp;&nbsp;&nbsp; EMPLOYEE(SUBORDINATE)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:n on A.EMPNO=B.BOSS<br>
            <br>
SALARYGRADE (GRADE INTEGER NOT NULL, LOSAL INTEGER NOT NULL, HISAL
INTEGER NOT NULL)<br>
            <br>
&nbsp; ignored:<br>
&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
1:n on B.SALARY BETWEEN A.LOSAL AND A.HISAL<br>
            <br>
            <br>
tables in dependent-cycle: EMPLOYEE<br>
            <br>
excluding following tables from component-analysis:&nbsp; { DEPARTMENT,
SALARYGRADE }<br>
            <br>
1 components:<br>
&nbsp;{ EMPLOYEE }<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <br>
A restriction-model is part of the extraction-model. Create a new
extraction-model:<br>
      <br>
      <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">extractionmodel/scott-without-subordinates.csv</span>
            </span><span style="font-family: monospace;"></span></big><br>
            </td>
          </tr>
        </tbody>
      </table>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;"># the employee named 'SCOTT' and all
associated entities<br>
            <br>
subject;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
condition;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
limit;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; restrictions<br>
EMPLOYEE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
NAME='SCOTT';&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
 style="font-family: monospace; color: rgb(255, 0, 0);">no-subordinates.csv</span></td>
          </tr>
        </tbody>
      </table>
      <br>
      <br>
and look what Jailer extracts now:<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$ sh bin/jailer.sh export -e scott.sql
            <span style="color: rgb(204, 0, 0);">extractionmodel/scott-without-subordinates.csv</span>
com.ibm.db2.jcc.DB2Driver jdbc:db2://localhost:50001/wisser xbcsetup
1234 &gt; /dev/null<br>
$ cat scott.sql<br>
            </span><span style="font-family: monospace;">-- generated
by Jailer at Mon Jun 04 15:08:15 CEST 2007 from wisser@u19<br>
--<br>
-- extraction model:&nbsp; EMPLOYEE where NAME='SCOTT'
(extractionmodel/scott-without-subordinates.csv)<br>
-- database URL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
jdbc:db2://localhost:50001/wisser<br>
-- database user:&nbsp;&nbsp;&nbsp;&nbsp; scott<br>
-- exported entities: 7<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
DEPARTMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
SALARYGRADE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2<br>
            <br>
            <br>
            <br>
Insert into SALARYGRADE(GRADE, LOSAL, HISAL) <br>
&nbsp; values (4, 2001, 3000), <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (5, 3001, 9999);<br>
Insert into DEPARTMENT(DEPTNO, NAME, LOCATION) <br>
&nbsp; values (20, 'RESEARCH', 'DALLAS'), <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (10, 'ACCOUNTING',
'NEW YORK');<br>
Insert into EMPLOYEE(EMPNO, NAME, JOB, BOSS, HIREDATE, SALARY, COMM,
DEPTNO) <br>
&nbsp; values (7839, 'KING', 'PRESIDENT', null, '1981-11-17', 5000.00,
null, 10);<br>
Insert into EMPLOYEE(EMPNO, NAME, JOB, BOSS, HIREDATE, SALARY, COMM,
DEPTNO) <br>
&nbsp; values (7566, 'JONES', 'MANAGER', 7839, '1981-04-02', 2975.00,
null, 20);<br>
Insert into EMPLOYEE(EMPNO, NAME, JOB, BOSS, HIREDATE, SALARY, COMM,
DEPTNO) <br>
&nbsp; values (7788, 'SCOTT', 'ANALYST', 7566, '1982-12-09', 3000.00,
null, 20);<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
Freedom for the innocent!<br>
      <br>
      <h3>Step 8. Delete Scott (unsuccessful)</h3>
It is also possible to create DML-scripts for deletion of exported
entities:<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$ sh bin/jailer.sh export -e scott.sql
            <span style="color: rgb(204, 0, 0);">-d delete-scott.sql</span>
extractionmodel/scott-without-subordinates.csv
com.ibm.db2.jcc.DB2Driver jdbc:db2://localhost:50001/wisser scott tiger
&gt; /dev/null<br>
$ cat delete-scott.sql<br>
-- generated by Jailer at Tue Jun 05 10:20:40 CEST 2007 from wisser@u19<br>
--<br>
-- extraction model:&nbsp; EMPLOYEE where NAME='SCOTT'
(extractionmodel/scott-without-subordinates.csv)<br>
-- database URL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
jdbc:db2://localhost:50001/wisser<br>
-- database user:&nbsp;&nbsp;&nbsp;&nbsp; scott<br>
-- exported entities: 7<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
DEPARTMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
SALARYGRADE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2<br>
--<br>
-- Tabu-tables:&nbsp; {&nbsp; }<br>
--<br>
-- entities to delete: 0<br>
            <br>
            </span><span style="font-family: monospace;"></span></td>
          </tr>
        </tbody>
      </table>
      <br>
Jailer has exported 7 entities but didn't delete anything! That's
because deleting Scott but not Scotts subordinate (who is not in the
set defined by the extraction-model!) would violate the integrity of
the data base.<br>
      <br>
      <h3>Step 9. Delete Scott</h3>
      <p>In order to delete Scott, me must delete his subordinate too.
To do so, relax the restriction on the <span
 style="font-style: italic;">SUBORDINATE</span>-association:</p>
      <table
 style="background-color: rgb(51, 102, 255); text-align: left;"
 border="0" cellpadding="2" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="height: 24px; background-color: rgb(202, 225, 235); vertical-align: top;"><big><span
 style="font-family: monospace;"><span style="font-weight: bold;">restrictionmodel/no-subordinates.csv</span>
            </span><span style="font-family: monospace;"></span></big><br>
            </td>
          </tr>
        </tbody>
      </table>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td colspan="2" rowspan="1"
 style="background-color: rgb(202, 225, 235); vertical-align: top;"><span
 style="font-family: monospace;">from A (or association name); to
B;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; restriction-condition<br>
SUBORDINATE;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span
 style="color: rgb(204, 0, 0);">A.NAME='SCOTT'</span><br>
DEPARTMENT;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
EMPLOYEE;&nbsp;&nbsp; ignore<br>
SALARYGRADE;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
EMPLOYEE;&nbsp;&nbsp; ignore<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
and repeat the exportation:<br>
      <br>
      <table style="width: 100%; text-align: left;" border="0"
 cellpadding="0" cellspacing="0">
        <tbody>
          <tr>
            <td
 style="background-color: rgb(230, 255, 230); vertical-align: top;"><span
 style="font-family: monospace;">$ sh bin/jailer.sh export -e <a
 href="scott.sql.2.html"><img alt="" src="arrow.gif"
 style="border: 0px solid ; width: 13px; height: 13px;" hspace="4">scott.sql</a>
            <span style="color: rgb(0, 0, 0);">-d delete-scott.sql</span>
extractionmodel/scott-without-subordinates.csv
com.ibm.db2.jcc.DB2Driver jdbc:db2://localhost:50001/wisser scott tiger
&gt; /dev/null<br>
$ cat delete-scott.sql<br>
-- generated by Jailer at Tue Jun 05 10:50:03 CEST 2007 from wisser@u19<br>
--<br>
-- extraction model:&nbsp; EMPLOYEE where NAME='SCOTT'
(extractionmodel/scott-without-subordinates.csv)<br>
-- database URL:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
jdbc:db2://localhost:50001/wisser<br>
-- database user:&nbsp;&nbsp;&nbsp;&nbsp; scott<br>
-- exported entities: 9<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
DEPARTMENT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
4<br>
--&nbsp;&nbsp;&nbsp;&nbsp;
SALARYGRADE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3<br>
--<br>
-- Tabu-tables:&nbsp; {&nbsp; }<br>
--<br>
-- entities to delete: 2<br>
--&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
EMPLOYEE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2 (-2)<br>
            <br>
            <br>
            <br>
Delete from EMPLOYEE Where EMPNO in (7876);<br>
Delete from EMPLOYEE Where EMPNO in (7788);<br>
            </span></td>
          </tr>
        </tbody>
      </table>
      <br>
The file <big><span style="font-family: monospace;">delete-scott.sql</span></big>
contains <big><span style="font-family: monospace;">Delete</span></big>-statements
for Scott and Adams.<br>
Note that <big><span style="font-family: monospace;">scott.sql</span></big>
now contains <big><span style="font-family: monospace;">Insert</span></big>-statements
for Adams and his salary-grade too.<br>
      <br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>
</body>
</html>
